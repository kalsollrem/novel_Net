<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>프로필</title>
    <link rel="stylesheet" href="../css/style.css">
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script src="../js/index.js"></script>
    <script src="../js/profill.js"></script>
</head>
<body>
    <!-- 모달 레이아웃 -->
    <div class="modal_layout" th:replace="/include/header.html :: modal_layout"></div>
    <!-- 모달 레이아웃 -->
    <div class="wrap">
        <header th:replace="/include/header.html :: header"></header>

<!------------------- 마이페이지용 ------------------------->
        <div class="profile_bag"></div>
<!------------------- 마이페이지용 ------------------------->

        <div class="contents">
            <div class="main_content">
        <!------------ 콘텐츠 영역   ------------------>
                <div class="profile">
                    <div class="profile_data">
                        <div class="profil_pic">
                            <img th:if="${profillData.u_pic} != null"  th:src="'../userImg/'+${profillData.u_pic}" alt="프로필" onerror="this.src='../img/profill.jpg'">
                            <img th:unless="${profillData.u_pic} != null" src="../img/profill.png" alt="프로필" >
                        </div>
                        <div class="pic_edit">
                            <img src="../img/edit_icon.png" alt="set">
                        </div>
                        <div class="profil_name"><div class="nameSpace" th:text="${profillData.u_nick}"></div><div> 님의 회원카드</div></div>
                        <ul class="profil_menu">
                            <li class="btn_profillRewrite" th:if="${who}=='me'">정보관리</li>
                            <li class="btn_myReply" th:if="${who}=='me'">댓글</li>
                            <li class="btn_writeNovel">연재소설</li>
                            <li class="btn_profill">프로필</li>
                        </ul>
                    </div>
                </div> 
                <div class="profile_main">
                    <div class="my_novel">
                        <div class="my_novels"><h3>[[${profillData.u_nick}]]</h3><h5>님의 소설</h5></div>
                        <ul class="novel_list">
                            <th:block th:each="novelList : ${novelList}">
                                <li>
                                    <span class="up_title"><b>[[${novelList.n_title}]]</b></span>
                                    <span class="up_date" th:if="${novelList.n_date} != 'none'">[[${novelList.n_date}]]</span>
                                    <span class="up_date" th:unless="${novelList.n_date} != 'none'"> </span>
                                </li>
                            </th:block>
                        </ul>
                    </div>
                    <div class="myself">
                        <div class="self_intro">
                            <div class="sf_intro">자기소개</div>
                            <div class="my_intro" th:utext="${profillData.u_myself}">s</div>
                        </div>
                        <ul class="self_info">
                            <li>
                                <div class="sf_date title_position">가입일</div>
                                <div class="join_date text_position" th:text="${profillData.u_regdate}">2022년 2월 12일</div>
                            </li>
                            <li>
                                <div class="sf_bestpic title_position">선호태그</div>
                                <div class="my_bestpic text_position"  th:if="${tvo.h_tag}!=null" th:text="${tvo.h_tag}">무협</div>
                                <div class="my_bestpic text_position"  th:if="${tvo.h_tag}==null">없음</div>
                            </li>
                            <li>
                                <div class="sf_novel_info title_position">총 댓글</div>
                                <div class="my_novel_info text_position"  th:if="${tvo.r_max}!=null" th:text="${tvo.r_max}+ '개'">x개</div>
                                <div class="my_novel_info text_position"  th:unless="${tvo.r_max}!=null">0 개</div>
                            </li>
                        </ul>

                    </div>
                </div>
                <div class="serialized_info">
                    <ul class="info_change" th:if="${who}=='me'">
                        <li>
                            <div class="change_box">닉네임</div>
                            <div class="change_nick">
                                <input type="text" class="nick" id="nickChange" placeholder="닉네임을 입력해주세요." th:value="${profillData.u_nick}">
                            </div>
                        </li>
                        <li>
                            <div class="change_box">비밀번호 변경</div>
                            <div class="change_password">
                                <input type="password" class="password" id="passwordChange" maxlength="20">
                                <span>12자 이상 20자 이하의 비밀번호를 입력해주세요.</span>
                            </div>
                        </li>
                        <li>
                            <div class="change_box">비밀번호 확인</div>
                            <div class="change_passcheck">
                                <input type="password" class="passcheck" maxlength="20">
                                <span>비밀번호가 일치합니다.</span>
                            </div>
                        </li>
                        <li>
                            <div class="change_box">이메일</div>
                            <div class="change_mail">
                                [[${profillData.u_mail}]]
                            </div>
                        </li>
                        <li>
                            <div class="change_box">자기소개</div>
                            <div class="change_intro">
                                <textarea name="intro" id="intro" placeholder="자기소개">[[${profillData.u_myself}]]</textarea>
                            </div>
                        </li>
                        <li>
                            <div class="change_commit">
                                <button type="button" class="change_ok">정보 수정</button>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="serialized_novel" >
                    <div class="list_up">
                        <th:block th:each="novelList : ${novelList}">
                            <div class="lu_box">
                                <div class="lu_img">
                                    <a th:href="@{/novelnet/novel(n_num=${novelList.n_num},page=1,sort='asc')}">
                                        <img th:src="'../notImg/'+${novelList.getN_cover()}" th:alt="${novelList.n_title}" onerror="this.src='../img/write_cover.jpg'">
                                    </a>
                                </div>
                                <div class="lu_data">
                                    <div class="lu_title overLineTypeA">
                                        <a class="overLineTypeA" th:href="@{/novelnet/novel(n_num=${novelList.n_num},page=1,sort='asc')}">
                                            [[${novelList.getN_title()}]]
                                        </a>
                                    </div>
                                    <div class="lu_pri overLineTypeA" th:text="${novelList.getN_introduction()}"></div>
                                    <ul class="lu_record">
                                        <li>
                                            <img src="../img/count_view.png" alt="조회수" th:if="${novelList.getN_count == null}" th:text="0명">
                                            <img src="../img/count_view.png" alt="조회수" th:if="${novelList.getN_count != null}" th:text="${novelList.getN_count}+'명'">
                                        </li>
                                        <li>
                                            <img src="../img/count_book.png" alt="회차" th:if="${novelList.getN_chapters == null}" th:text="0회차">
                                            <img src="../img/count_book.png" alt="회차" th:if="${novelList.getN_chapters != null}" th:text="${novelList.getN_chapters}+'회차'">
                                        </li>
                                        <li>
                                            <img src="../img/count_good.png" alt="추천" th:if="${novelList.getN_good == null}" th:text="0회">
                                            <img src="../img/count_good.png" alt="추천" th:if="${novelList.getN_good != null}" th:text="${novelList.getN_good}+'회'">
                                        </li>
                                    </ul>
                                    <div class="lu_tag">
                                        <div th:utext="${novelList.all_tag}" class="lu_tag_Box overLineTypeA">
                                            <div class="lu_tagcards" >#현대</div>
                                        </div>
                                        <div class="lu_update" th:if="${novelList.n_date} != 'none'" th:text="${#strings.substring(novelList.n_date, 5)}"></div>
                                    </div>
                                </div>
                            </div>
                        </th:block>
                    </div>
                </div>
                <div class="serialized_reply">
                    <h3>내가 단 댓글 목록</h3>
                    <hr class="reply_line">
                    <hr class="reply_line">
                    <!--리플 박스-->
                    <th:block th:each="replyVOS : ${replyVOS}">
                        <div class="myReply_box">
                            <div class="novel_name reply_ellipsis" th:if="${replyVOS.stopCnt} <= 5 ">
                                <a th:href="@{/novelnet/novel(n_num=${replyVOS.n_num},page=1,sort='asc')}" th:text="${replyVOS.n_title}">글제목</a>
                            </div>
                            <div class="novel_name reply_ellipsis" th:unless="${replyVOS.stopCnt} <= 5 " > 블라인드 처리된 소설입니다 </div>
                            <div class="box_firstLine">
                                <div class="chapter_name">
                                    <div>[</div>
                                    <div class="chapter_name_box reply_ellipsis" th:if="${replyVOS.stopCnt} <= 5 ">
                                        <a th:href="@{/novelnet/view(n_num=${replyVOS.n_num},chapter=${replyVOS.m_num},sort='asc',page='1',type='ep',rbt=${replyVOS.r_num})}" th:text="${replyVOS.m_title}"></a>
                                    </div>
                                    <div class="chapter_name_box reply_ellipsis" th:unless="${replyVOS.stopCnt} <= 5 " >블라인드 처리된 글입니다.</div>
                                    <div>]</div>
                                </div>
                                <div class="chapter_date" th:text="${replyVOS.r_date}">07.11</div>
                            </div>
                            <div th:if="${replyVOS.r_rnum} != 0">
                                <div class="myReply_to_Who" th:if="${replyVOS.nick}!=''">
                                    <div class="giho">▶</div>
                                    <div class="who_name reply_ellipsis" th:text="${replyVOS.nick}">작성자</div>
                                    <div class="toYou"> 님에게</div>
                                </div>
                                <div class="myReply_to_Who" th:unless="${replyVOS.nick}!=''">
                                    <div class="giho">▶</div>
                                    <div class="who_name reply_ellipsis">존재하지 않는 작성자입니다.</div>
                                </div>
                            </div>
                            <div class="myReply_memo" th:utext="${replyVOS.r_memo}">
                                내 리플 메모
                            </div>
                            <div class="myReply_menubar">
                                <div class="myReply_Date">
                                    <div class="myReply_rereply reply_otp_333" th:if="${replyVOS.rRcnt}>0">
                                        <span>▧</span>
                                        <a th:href="@{/novelnet/view(n_num=${replyVOS.n_num},chapter=${replyVOS.m_num},sort='desc',page='1',type='ep',rbt=${replyVOS.r_num})}">대댓글 ([[${replyVOS.rRcnt}]]건)</a>
                                    </div>
                                    <div class="myReply_good reply_otp_purple"><img src="../img/good_Down.png" alt="추천" th:text="'추천( '+${replyVOS.r_good}+'건 )'"></div>
                                    <div class="myReply_bed reply_otp_orange"><img src="../img/bad.png" alt="비추" th:text="'비추천( '+${replyVOS.r_bad}+'건 )'"></div>
                                </div>
                                <div class="myReply_control_box">
                                    <div class="myReply_delete reply_otp_red" th:id="'num'+${replyVOS.r_num}">삭제</div>
<!--                                    <div class="myReply_update reply_otp_yellowgreen">수정</div>-->
                                </div>
                            </div>
                        </div>
                    </th:block>
                </div>
        <!------------ 콘텐츠 영역  ------------------>
            </div>
        </div>
    </div>
    <footer>
        <div class="notice">
            <div class="notice_frame">
                <span class="notice_memo_gong"><b>공지</b></span>
                <div class="new_gong">new</div>
                <span class="notice_memo">정기 시스템 점검 예정 (AM 01:00 - 04:00)</span>
            </div>
        </div>
        <div class="footer_info">
            <div class="footer_info_frame">
                <div class="copyright">
                    <div class="mono_logo"> 
                        <img src="../img/mono_logo.png">
                    </div>
                    <ul class="copyright_c">
                        <li>본 사이트의 등록된 컨텐츠는 사이트 및 원 저작자에게 권리가 있는 컨텐츠이며, 무단 복제/전송/수정/배포는 법적 처벌을 받을 수 있습니다.</li>
                        <li><span class="copyright_c_mini">Copyright(c) 노벨넷 2022. All rights reserved</span></li>
                    </ul>
                </div>
                <ul class="copyright_memo">
                    <li>주식회사 노벨넷 대표 김정현 사업자등록번호 210-81-75711 통신판매업 제2021-김제요촌-013145호</li>
                    <li>주소 김제시 요촌동 81-42번지, T플로어 3층</li>
                    <li>고객센터 : 063-588-0011 helpNovel@gmail.com 운영시간 AM10:00 - PM 06:00 (휴게시간 PM 0:30 - 2:00)</li>
                </ul>
            </div>  
        </div>
    </footer>
    
</body>
</html>